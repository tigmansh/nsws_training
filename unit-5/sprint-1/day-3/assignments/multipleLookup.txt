db.people.aggregate([ { $lookup: { from: "zipcodes", localField: "address", foreignField: "address", as: "zipcode" } }, { $unwind: "$zipcode" }, { $lookup: { from: "cities", localField: "zipcode.zipcode", foreignField: "zipcode", as: "city" } }, { $unwind: "$city" }, { $lookup: { from: "countries", localField: "city.state", foreignField: "state", as: "country" } }, { $unwind: "$country" }, { $project: { name: 1, age: 1, address: 1, "zipcode": "$zipcode.zipcode", "city": "$city.city", "state": "$city.state", "country": "$country.country" } }])
